<div class="quizgen-component mt-1">
    <div class="row mb-3">
        <div class="col-lg quizgen-inputs-container">
            <!-- inputs -->
            <div class="quizgen-inputs">
                <h1>Source text</h1>
                <div>
                    <!-- input file -->
                    <div class="mb-3">
                        <div class="form-label">Source text file</div>
                        <div class="input-group">
                            <input type="file" class="quizgen-source-file form-control" title="Select the source text file. This will overwrite the text editor contents."/>
                        </div>
                    </div>

                    <!-- input text -->
                    <h1></h1>
                    <div class="mb-3">
                        <label for="quizgen-source-text-editor" class="form-label">
                            Source text editor
                        </label>
                        <textarea 
                            name="quizgen-source-text-editor"
                            class="form-control font-monospace quizgen-source-text-editor" 
                            rows="5"
                            placeholder="file upload preview pending"
                            title="Write/edit the source text."></textarea>
                    </div>
                </div>

                <!-- input notes name -->
                <div class="mb-3">
                    <label for="quizgen-notes-name" class="form-label">Generated notes name</label>
                    <input 
                        name="quizgen-notes-name" 
                        class="form-control quizgen-notes-name" 
                        type="text" placeholder="target-lang-notes-1"
                        title="The generated Anki notes file will include this value in the file name."/>
                </div>

                <h3 role="button" aria-expanded="false"
                    data-bs-toggle="collapse"
                    data-bs-target=".quizgen-advanced-options">
                    Advanced options
                    <i class="collapse-arrow bi bi-caret-left h4 mx-4 pe-none"></i>
                </h3>
                <div class="collapse quizgen-advanced-options">
                    <!-- testable words filter -->
                    <div class="mb-3">
                        <label for="quizgen-word-excludes form-label">
                            Excluded patterns from testable words
                        </label>
                        <textarea 
                            name="quizgen-word-excludes" 
                            class="form-control font-monospace quizgen-word-excludes" 
                            rows="3"
                            placeholder="string1&#10;/reg(ular)?exp(ression)?/"></textarea>
                    </div>

                    <!-- testable words min length -->
                    <div class="mb-3">
                        <div class="form-label">
                            Minimum length for testable words
                        </div>
                        <div class="input-group">
                            <div class="input-group-text">
                                Exclude words shorter than
                            </div>
                            <input 
                                type="number" class="quizgen-word-length-min form-control" 
                                value="2" min="1" step="1"
                            />
                            <div class="input-group-text">
                                characters
                            </div>
                        </div>
                    </div>

                    <!-- testable words min frequency -->
                    <div class="mb-3">
                        <div class="form-label">
                            Minimum frequency/occurrences in source text for testable words
                        </div>
                        <div class="input-group">
                            <div class="input-group-text">
                                Exclude words that occur fewer than
                            </div>
                            <input 
                                type="number" class="quizgen-frequency-min form-control" 
                                value="2" min="1" step="1"
                            />
                            <div class="input-group-text">
                                times
                            </div>
                        </div>
                    </div>

                    <!-- testable words ordinal frequency -->
                    <div>
                        <div class="form-label">
                            Filter most common or rare for testable words
                        </div>
                        <div class="row">
                            <div class="col-xl mb-3">
                                <div class="input-group">
                                    <div class="input-group-text">
                                        <input 
                                            class="quizgen-frequency-order-enable form-check-input mt-0" 
                                            type="checkbox"
                                            value="filter-frequency-order"/>
                                    </div>
                                    <div class="input-group-text">
                                        Include the
                                    </div>
                                    <input 
                                        type="number" 
                                        class="quizgen-frequency-order-limit form-control" 
                                        value="100" min="0" disabled/>
                                    <button 
                                        class="btn btn-outline-light quizgen-frequency-order-percent" 
                                        data-percent="false"
                                        title="whether to treat this number as a percentage" disabled>
                                        <i class="bi bi-hash pe-none"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-xl mb-3">
                                <div class="input-group justify-content-center">
                                    <div class="input-group-text">
                                        most
                                    </div>
                                    <button 
                                        type="button" 
                                        class="quizgen-frequency-order-select btn btn-secondary dropdown-toggle"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false" disabled>
                                        common
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <span class="dropdown-item quizgen-frequency-order-most">common</span>
                                        </li>
                                        <li>
                                            <span class="dropdown-item quizgen-frequency-order-least">rare</span>
                                        </li>
                                    </ul>
                                    <div class="input-group-text">
                                        words
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="form-label">
                            Answer choice options
                        </div>
                        <!-- choice count -->
                        <div 
                            class="input-group mb-3"
                            title="Number of choices from which to choose the answer">
                            <div class="input-group-text">
                                Choice count
                            </div>
                            <input name="quizgen-choice-count" 
                                class="quizgen-choice-count form-control"
                                type="number" min="0" step="1"
                                placeholder="5" value="5"/>
                        </div>
                        
                        <!-- choice variation -->
                        <div 
                            class="row mb-3" 
                            title="Probability that a choice will be random instead of similar to the test word">
                            <div class="col-sm">
                                Choice variation/randomness
                            </div>
                            <div class="col-sm">
                                <input name="quizgen-choice-variation" 
                                class="quizgen-choice-variation form-range"
                                type="range" min="0" max="1" step="0.05"/>
                            </div>
                        </div>
                    </div>

                    <!-- note tags -->
                    <div class="mb-3">
                        <label for="quizgen-note-tags form-label">
                            Anki note tags
                        </label>
                        <textarea 
                            name="quizgen-note-tags" 
                            class="form-control font-monospace quizgen-note-tags" 
                            rows="1" placeholder="tag-1,tag-2"
                            title="Tags are a helpful and flexible way to organize notes within Anki."></textarea>
                    </div>

                    <!-- sentence length limits -->
                    <div class="mb-3">
                        <label for="quizgen-sentence-limits">
                            Sentence length limits
                        </label>
                        <div 
                            class="input-group quizgen-sentence-limits" 
                            name="quizgen-sentence-limits" 
                            title="Control the minimum number of testable words required to finish a sentence (1 note is at least 1 sentence), and the maximum number of tokens (testable and not testable) before breaking a sentence.">
                            <div class="input-group-text">
                                <input 
                                    class="quizgen-sentence-limits-enable form-check-input mt-0" 
                                    type="checkbox"
                                    value="filter-frequency-order"/>
                            </div>
                            <div class="input-group-text">testable word min</div>
                            <input class="form-control quizgen-sentence-word-min" 
                                type="number" placeholder="3" value="3"
                                min=0 step="1" 
                                disabled
                            />
                            <div class="input-group-text">token max</div>
                            <input 
                                class="form-control quizgen-sentence-token-max" 
                                type="number" min="0" step="1" disabled
                            />
                        </div>
                    </div>

                    <!-- note prologue, epilogue -->
                    <label class="form-label">
                        Note prologue and epilogue word counts
                    </label>
                    <div class="row">
                        <div class="col-sm">
                            <div 
                                class="input-group mb-3" 
                                title="Number of tokens in prologue (from previous sentence)">
                                <div class="input-group-text">
                                    Prologue
                                </div>
                                <input
                                    class="form-control quizgen-prologue-length"
                                    type="number" min="0" value="0" placeholder="0"
                                />
                            </div>
                        </div>
                        <div class="col-sm">
                            <div 
                                class="input-group mb-3" 
                                title="Number of tokens in epilogue (words from next sentence)">
                                <div class="input-group-text">
                                    Epilogue
                                </div>
                                <input
                                    class="form-control quizgen-epilogue-length"
                                    type="number" min="0" value="0" placeholder="0"
                                />
                            </div>
                        </div>
                    </div>

                    <!-- preview note count limit -->
                    <div class="mb-3">
                        <label for="quizgen-preview-limits">
                            Preview limit
                        </label>
                        <div class="input-group quizgen-preview-limits"
                            name="quizgen-preview-limits">
                            <div class="input-group-text">
                                Include up to
                            </div>
                            <input 
                                class="form-control quizgen-preview-limit"
                                placeholder="3"
                                value="3" type="number" min="1" max="50" step="1"
                            />
                            <div class="input-group-text">
                                Anki notes in preview
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- submission buttons -->
            <div class="row">
                <div class="col-lg">
                    <button class="quizgen-generate-preview btn btn-outline-light w-100 mb-2">
                        <span class="fs-2 mx-2">Preview</span>
                        <i class="bi bi-arrow-clockwise fs-3 mx-2"></i>
                    </button>
                </div>
                <div class="col-lg">
                    <button class="quizgen-generate-full btn btn-outline-light w-100 mb-2">
                        <span class="fs-2 mx-2">Generate</span>
                        <i class="bi bi-box-arrow-down fs-3 mx-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- result download -->
            <div class="row">
                <!-- result file download url will be set here -->
                <div 
                    class="quizgen-download d-none mb-3">
                    <h4>Anki notes file</h4>
                    <div>
                        <a class="quizgen-download-anchor"></a>
                        [<span class="quizgen-download-size"></span>
                        <span class="quizgen-download-size-unit"></span>]
                        [expiry <span class="quizgen-download-expiry"></span> 
                        <span class="quizgen-download-expiry-unit"></span>]
                    </div>
                    
                    <h4>Anki card template files</h4>
                    <div class="quizgen-anki-card-download">
                        <div class="mb-2">
                            <a href="/out/webserver/anki/cards/fill-blanks/front.html" download>front.html</a>
                        </div>
                        <div class="mb-2">
                            <a href="/out/webserver/anki/cards/fill-blanks/back.html" download>back.html</a>
                        </div>
                        <div>
                            <a href="/out/webserver/anki/cards/fill-blanks/style.css" download>style.css</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- outputs -->
        <div class="col-lg quizgen-previews-container">
            <h1>Output previews</h1>

            <!-- anki notes export preview -->
            <div class="quizgen-anki-notes-container mb-3">
                <label class="form-label" for="quizgen-anki-notes-text">
                    Anki notes file preview
                </label>
                <textarea 
                    name="quizgen-anki-notes-text" 
                    class="quizgen-anki-notes-text form-control font-monospace" 
                    rows="10" 
                    disabled>anki notes file text</textarea>
            </div>
            <!-- anki cards preview -->
            <div class="quizgen-anki-cards">
                <div class="card-container mb-2 ">
                    <h3>Front card</h3>
                    <div class="input-group mb-2">
                        <div class="input-group-text">note #</div>
                        <input 
                            class="quizgen-anki-note-idx-front form-control bg-dark text-light" 
                            disabled/>
                        <div class="input-group-text">word #</div>
                        <input 
                            class="quizgen-anki-cloze-idx-front form-control bg-dark text-light" 
                            disabled/>
                        <button 
                            class="quizgen-anki-card-random-front btn btn-outline-light" 
                            role="button">
                            <i class="bi bi-dice-3 fs-5"></i>
                        </button>
                    </div>
                    <div class="card quizgen-anki-notes-card-front">
                        <div class="card-body">
                            <div class="card-title">card title</div>
                            <hr/>
                            <div class="card-text">card content</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>